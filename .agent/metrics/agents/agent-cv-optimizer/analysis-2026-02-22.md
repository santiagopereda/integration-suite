# Phase 2: ANALYZE - agent-cv-optimizer

**Date**: 2026-02-22
**Agent Size**: SMALL-MEDIUM (3,483 tokens)
**Documentation Strategy**: HYBRID (Template Usage table + minimal references)

## Pattern Matching Results

### PAT-01: Template Externalization
**Trigger**: Multiple sections > 100 words
**Match**: YES - 6 sections qualify

| Section | Tokens | Words | Externalize? |
|---------|--------|-------|--------------|
| Three Operating Modes | 877 | ~440 | YES |
| Frontmatter examples | 681 | ~340 | YES |
| Directory Structure Workflow | 295 | ~148 | YES |
| Recruiter Outreach Workflow | 196 | ~98 | YES |
| RenderCV Integration | 186 | ~93 | YES |
| Web Research Guidelines | 160 | ~80 | YES |

**Total Externalizable**: 2,395 tokens (69% of agent)

### PAT-02: Lazy Loading
**Trigger**: Templates loaded unconditionally
**Match**: YES - 5 existing template references can be improved
- Already uses lazy loading pattern (Read tool when needed)
- Current implementation is good, no change needed

### PAT-03: Output Modes
**Trigger**: No verbosity control
**Match**: YES - Has Brief/Standard/Detailed modes
- Already implemented at lines 246-266
- No optimization needed

### PAT-04: Section Compression
**Trigger**: Similar agent has fewer lines
**Match**: PARTIAL
- agent-robotarm-tester: 172 lines (3,909 tokens)
- agent-cv-optimizer: 321 lines (3,483 tokens)
- More sections but already efficient per-section

### PAT-05: Verification-First
**Trigger**: No verification constraint
**Match**: YES - Has comprehensive constraints
- Critical Constraints section (lines 267-291) covers:
  - Accuracy First
  - Ethical Boundaries
  - Transparency
  - User Control
- No optimization needed

## Optimization Score Calculation

```
potential = 0
recommendations = []

# Large externalizable content
potential += 60  # 2,395 tokens = 69% of agent

# Already has lazy loading
# Already has output modes
# Already has verification constraints

# High structural quality
potential += 10  # Well-organized, clear sections

# Telemetry weight
score = potential * (0 / 100)  # No telemetry data
# Fallback to structural score
score = 70
```

**Optimization Score**: 70/100 (High Priority)

## Expected Reduction

**Content to Externalize**: 2,395 tokens
**HYBRID Documentation Overhead**: ~800 tokens
- Template Usage table: ~200 tokens
- Minimal references (6 templates × 1-2 lines): ~150 tokens
- Section transitions: ~100 tokens
- Template metadata: ~350 tokens

**Net Reduction**: 2,395 - 800 = 1,595 tokens saved
**Reduction Percentage**: 1,595 / 3,483 = 45.8%

**Revised Target**: 30-40% net reduction (more conservative)

## Risk Assessment

| Risk | Level | Mitigation |
|------|-------|------------|
| Quality gate failure | LOW | All constraints preserved in agent |
| Template complexity | LOW | Simple workflow content, well-structured |
| User experience | LOW | Templates improve organization |
| Maintenance overhead | LOW | 6 templates, clear purpose |

## Recommendations Summary

1. **Template Externalization (PAT-01)** - High impact
   - Extract 6 sections to `.agent/templates/career/`
   - Use HYBRID documentation approach
   - Expected: 45% reduction

2. **Maintain Current Patterns** - Already optimal
   - Keep existing lazy loading
   - Keep output modes
   - Keep verification constraints

3. **Quality Gate Pre-Check** - All pass
   - ✓ Critical constraints present
   - ✓ Fabrication prevention
   - ✓ Uncertainty acknowledgment
   - ✓ Template references valid (will be after creation)

**Proceed to Phase 3: PLAN**
